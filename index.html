<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Busca de Registros</title>
<link rel="stylesheet" href="index.css">
<style>
    .container {
        display: flex;
        gap: 30px;
        justify-content: center;
        margin-top: 40px;
    }

    .lista-box {
        width: 300px;
        height: 500px;
        overflow-y: scroll;
        background: #202530;
        padding: 15px;
        border-radius: 10px;
        color: white;
        box-shadow: 0 0 10px #08090f;
    }

    .linha-registro {
        padding: 5px 0;
        border-bottom: 1px solid #444;
        font-size: 15px;
    }
</style>
</head>

<body>

<nav>Projeto N2 Algoritmos e Estrutura de Dados</nav>

<div class="container">

    <!-- BOX DAS BUSCAS -->
    <div class="box">
        <h2>Escolha o tipo de busca</h2>

        <label>Nome para buscar:</label>
        <input id="chave" type="text" placeholder="Digite o nome ou ID" style="width:85%;padding:8px;margin-bottom:10px;border-radius: 10px;background-color:#515c75; color:white; outline: none; border: none;">

        <script>
            const input = document.getElementById("chave");

            input.addEventListener("input", function () {
                let valor = input.value;

                if (!/^\d+$/.test(valor)) {
                    input.value = valor.charAt(0).toUpperCase() + valor.slice(1);
                }
            });
        </script>

        <button onclick="executarSequencial()">üîç Busca Sequencial</button>
        <button onclick="executarIndexada()">‚ö° Busca Indexada</button>
        <button onclick="executarHash()">üöÄ Busca HashMap</button>

        <div id="resultado">‚öôÔ∏è Aguardando busca...</div>
    </div>

    <!-- LISTA DOS REGISTROS -->
    <div class="lista-box">
        <h3>Lista de Registros</h3>
        <div id="lista-registros"></div>
    </div>

</div>

<script src="dados_simples_5000_com_id.js"></script>

<script>
    // ----------------------------------------------------------
    // INDICES E HASHMAPS
    // ----------------------------------------------------------

    const indiceNome = {};
    const indiceID = {};

    dados.forEach((item, pos) => {
        indiceNome[item.nome] = pos;
        indiceID[item.id] = pos;
    });

    const hashmapNome = {};
    const hashmapID = {};

    dados.forEach(item => {
        hashmapNome[item.nome] = item;
        hashmapID[item.id] = item;
    });


    // ----------------------------------------------------------
    // IDENTIFICAR SE √â ID OU NOME
    // ----------------------------------------------------------

    function identificarTipo(chave) {
        return /^\d+$/.test(chave) ? "id" : "nome";
    }


    // ----------------------------------------------------------
    // BUSCAS
    // ----------------------------------------------------------

    function buscaSequencial(lista, chave) {
        const tipo = identificarTipo(chave);

        for (let item of lista) {
            if (tipo === "id" && item.id == chave) return item;
            if (tipo === "nome" && item.nome === chave) return item;
        }
        return null;
    }

    function buscaIndexada(lista, chave) {
        const tipo = identificarTipo(chave);

        if (tipo === "id") {
            const pos = indiceID[chave];
            return pos !== undefined ? lista[pos] : null;
        } else {
            const pos = indiceNome[chave];
            return pos !== undefined ? lista[pos] : null;
        }
    }

    function buscaHash(chave) {
        const tipo = identificarTipo(chave);

        return tipo === "id"
            ? (hashmapID[chave] || null)
            : (hashmapNome[chave] || null);
    }


    // ----------------------------------------------------------
    // EXECUTAR BUSCAS
    // ----------------------------------------------------------

    function executarSequencial() {
        const chave = document.getElementById("chave").value.trim();
        const inicio = performance.now();
        const resultado = buscaSequencial(dados, chave);
        const tempo = performance.now() - inicio;
        mostrarResultado(resultado, tempo, "Busca Sequencial");
    }

    function executarIndexada() {
        const chave = document.getElementById("chave").value.trim();
        const inicio = performance.now();
        const resultado = buscaIndexada(dados, chave);
        const tempo = performance.now() - inicio;
        mostrarResultado(resultado, tempo, "Busca Indexada");
    }

    function executarHash() {
        const chave = document.getElementById("chave").value.trim();
        const inicio = performance.now();
        const resultado = buscaHash(chave);
        const tempo = performance.now() - inicio;
        mostrarResultado(resultado, tempo, "Busca HashMap");
    }


    // ----------------------------------------------------------
    // EXIBIR RESULTADO
    // ----------------------------------------------------------

    function mostrarResultado(resultado, tempo, tipo) {
        const box = document.getElementById("resultado");

        if (resultado) {
            box.innerHTML = `
                <b>${tipo}</b><br>
                ‚è± Tempo: ${tempo.toFixed(6)} ms<br><br>
                <b>Registro encontrado:</b><br>
                ID: ${resultado.id}<br>
                Nome: ${resultado.nome}<br>
                Email: ${resultado.email}<br>
                Telefone: ${resultado.telefone}
            `;
        } else {
            box.innerHTML = `
                <b>${tipo}</b><br>
                ‚ùå Nenhum registro encontrado.<br>
                ‚è± Tempo: ${tempo.toFixed(6)} ms
            `;
        }
    }


    // ----------------------------------------------------------
    // GERAR LISTA DE REGISTROS
    // ----------------------------------------------------------

    function carregarLista() {
        const lista = document.getElementById("lista-registros");
        lista.innerHTML = ""; 

        dados.forEach(item => {
            const linha = document.createElement("div");
            linha.classList.add("linha-registro");
            linha.innerHTML = `ID: ${item.id} ‚Äî ${item.nome}`;
            lista.appendChild(linha);
        });
    }

    carregarLista();
</script>

</body>
</html>
